!function(){"use strict";const e="https://assistente-virtual-seduc.vercel.app/api/chat",n="Assistente Virtual SEDUC-GO",t={primaryColor:"#2563eb",hoverColor:"#1d4ed8",backgroundColor:"#f9fafb",textColor:"#374151"};if(window.SeducChatWidget)return;const s=`\n        .seduc-chat-widget {\n            position: fixed;\n            bottom: 20px;\n            right: 20px;\n            z-index: 9999;\n            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;\n        }\n        \n        .seduc-chat-toggle {\n            width: 60px;\n            height: 60px;\n            border-radius: 50%;\n            background: ${t.primaryColor};\n            border: none;\n            cursor: pointer;\n            box-shadow: 0 4px 12px rgba(0,0,0,0.15);\n            display: flex;\n            align-items: center;\n            justify-content: center;\n            transition: all 0.3s ease;\n            color: white;\n        }\n        \n        .seduc-chat-toggle:hover {\n            background: ${t.hoverColor};\n            transform: scale(1.1);\n        }\n        \n        .seduc-chat-window {\n            position: absolute;\n            bottom: 80px;\n            right: 0;\n            width: 350px;\n            height: 500px;\n            background: white;\n            border-radius: 12px;\n            box-shadow: 0 8px 32px rgba(0,0,0,0.2);\n            display: none;\n            flex-direction: column;\n            overflow: hidden;\n        }\n        \n        .seduc-chat-window.open {\n            display: flex;\n            animation: slideUp 0.3s ease;\n        }\n        \n        @keyframes slideUp {\n            from { transform: translateY(20px); opacity: 0; }\n            to { transform: translateY(0); opacity: 1; }\n        }\n        \n        .seduc-chat-header {\n            background: ${t.primaryColor};\n            color: white;\n            padding: 16px;\n            display: flex;\n            align-items: center;\n            justify-content: space-between;\n        }\n        \n        .seduc-chat-title {\n            font-weight: 600;\n            font-size: 14px;\n        }\n        \n        .seduc-chat-close {\n            background: none;\n            border: none;\n            color: white;\n            font-size: 18px;\n            cursor: pointer;\n            padding: 0;\n            width: 24px;\n            height: 24px;\n            display: flex;\n            align-items: center;\n            justify-content: center;\n        }\n        \n        .seduc-chat-messages {\n            flex: 1;\n            overflow-y: auto;\n            padding: 16px;\n            background: ${t.backgroundColor};\n        }\n        \n        .seduc-message {\n            margin-bottom: 12px;\n            display: flex;\n            align-items: flex-start;\n        }\n        \n        .seduc-message.user {\n            justify-content: flex-end;\n        }\n        \n        .seduc-message-content {\n            max-width: 80%;\n            padding: 8px 12px;\n            border-radius: 12px;\n            font-size: 14px;\n            line-height: 1.4;\n        }\n        \n        .seduc-message.user .seduc-message-content {\n            background: ${t.primaryColor};\n            color: white;\n        }\n        \n        .seduc-message.assistant .seduc-message-content {\n            background: white;\n            color: ${t.textColor};\n            border: 1px solid #e5e7eb;\n        }\n        \n        .seduc-chat-input-container {\n            padding: 16px;\n            border-top: 1px solid #e5e7eb;\n            background: white;\n        }\n        \n        .seduc-chat-input {\n            width: 100%;\n            padding: 8px 12px;\n            border: 1px solid #d1d5db;\n            border-radius: 20px;\n            outline: none;\n            font-size: 14px;\n            resize: none;\n        }\n        \n        .seduc-chat-input:focus {\n            border-color: ${t.primaryColor};\n        }\n        \n        .seduc-loading {\n            display: flex;\n            align-items: center;\n            gap: 4px;\n            padding: 8px 12px;\n        }\n        \n        .seduc-loading-dot {\n            width: 4px;\n            height: 4px;\n            background: #9ca3af;\n            border-radius: 50%;\n            animation: bounce 1.4s ease-in-out infinite both;\n        }\n        \n        .seduc-loading-dot:nth-child(1) { animation-delay: -0.32s; }\n        .seduc-loading-dot:nth-child(2) { animation-delay: -0.16s; }\n        \n        @keyframes bounce {\n            0%, 80%, 100% { transform: scale(0); }\n            40% { transform: scale(1); }\n        }\n        \n        @media (max-width: 480px) {\n            .seduc-chat-window {\n                width: calc(100vw - 40px);\n                height: calc(100vh - 120px);\n                bottom: 80px;\n                right: 20px;\n                left: 20px;\n            }\n        }\n    `;class a{constructor(){this.isOpen=!1,this.messages=[],this.isLoading=!1,this.init()}init(){this.injectCSS(),this.createWidget(),this.addEventListeners(),this.addInitialMessage()}injectCSS(){const e=document.createElement("style");e.textContent=s,document.head.appendChild(e)}createWidget(){const e=document.createElement("div");e.className="seduc-chat-widget",e.innerHTML=`\n                <div class="seduc-chat-window" id="seduc-chat-window">\n                    <div class="seduc-chat-header">\n                        <div class="seduc-chat-title">${n}</div>\n                        <button class="seduc-chat-close" id="seduc-chat-close">Ã—</button>\n                    </div>\n                    <div class="seduc-chat-messages" id="seduc-chat-messages"></div>\n                    <div class="seduc-chat-input-container">\n                        <textarea \n                            class="seduc-chat-input" \n                            id="seduc-chat-input" \n                            placeholder="Digite sua pergunta..."\n                            rows="1"\n                        ></textarea>\n                    </div>\n                </div>\n                <button class="seduc-chat-toggle" id="seduc-chat-toggle">\n                    <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">\n                        <path d="M20 2H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h4l4 4 4-4h4c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm-2 12H6v-2h12v2zm0-3H6V9h12v2zm0-3H6V6h12v2z"/>\n                    </svg>\n                </button>\n            `,document.body.appendChild(e),this.widget=e}addEventListeners(){const e=document.getElementById("seduc-chat-toggle"),n=document.getElementById("seduc-chat-close"),t=document.getElementById("seduc-chat-input");e.addEventListener("click",()=>this.toggleChat()),n.addEventListener("click",()=>this.closeChat()),t.addEventListener("keypress",e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),this.sendMessage())}),t.addEventListener("input",()=>{t.style.height="auto",t.style.height=Math.min(t.scrollHeight,100)+"px"})}toggleChat(){const e=document.getElementById("seduc-chat-window");this.isOpen=!this.isOpen,this.isOpen?(e.classList.add("open"),document.getElementById("seduc-chat-input").focus()):e.classList.remove("open")}closeChat(){this.isOpen=!1,document.getElementById("seduc-chat-window").classList.remove("open")}addInitialMessage(){this.addMessage("assistant",`OlÃ¡! Sou o ${n}. Estou aqui para ajudar com suas dÃºvidas sobre os sistemas e programas da Secretaria de EducaÃ§Ã£o.\n\nPosso te ajudar a:\n- Entender como usar os sistemas (SIGE, SIAP, etc.)\n- Resolver mensagens de erro\n- Saber mais sobre o programa ReFormar VI\n\nComo posso te ajudar hoje? ðŸ˜Š`)}addMessage(e,n){const t=document.getElementById("seduc-chat-messages"),s=document.createElement("div");s.className=`seduc-message ${e}`;const a=document.createElement("div");a.className="seduc-message-content",a.textContent=n,s.appendChild(a),t.appendChild(s),t.scrollTop=t.scrollHeight,this.messages.push({sender:e,text:n,timestamp:new Date})}showLoading(){const e=document.getElementById("seduc-chat-messages"),n=document.createElement("div");n.className="seduc-message assistant",n.id="seduc-loading-message",n.innerHTML='\n                <div class="seduc-message-content">\n                    <div class="seduc-loading">\n                        <div class="seduc-loading-dot"></div>\n                        <div class="seduc-loading-dot"></div>\n                        <div class="seduc-loading-dot"></div>\n                    </div>\n                </div>\n            ',e.appendChild(n),e.scrollTop=e.scrollHeight}hideLoading(){const e=document.getElementById("seduc-loading-message");e&&e.remove()}async sendMessage(){const n=document.getElementById("seduc-chat-input"),t=n.value.trim();if(t&&!this.isLoading){this.addMessage("user",t),n.value="",n.style.height="auto",this.isLoading=!0,this.showLoading();try{const n=await fetch(e,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userInput:t,chatHistory:this.messages.slice(-10),learnedKnowledge:[]})});if(!n.ok)throw new Error("Erro na comunicaÃ§Ã£o com o servidor");const s=await n.json();this.hideLoading(),this.addMessage("assistant",s.text)}catch(e){this.hideLoading(),this.addMessage("assistant","Desculpe, ocorreu um erro. Tente novamente mais tarde ou entre em contato com o suporte: (62) 3220-9546"),console.error("Erro no chat:",e)}finally{this.isLoading=!1}}}}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",()=>{window.SeducChatWidget=new a}):window.SeducChatWidget=new a}();